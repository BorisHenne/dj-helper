generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./data/dj-rotation.db"
}

model DJ {
  id            String    @id @default(cuid())
  name          String    @unique
  avatar        String?   // Emoji ou URL d'avatar
  color         String?   // Couleur personnalis√©e pour l'UI
  totalPlays    Int       @default(0)
  lastPlayedAt  DateTime?
  isActive      Boolean   @default(true)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  plays         Play[]
}

model Play {
  id        String   @id @default(cuid())
  djId      String
  playedAt  DateTime @default(now())
  notes     String?  // Notes optionnelles sur le blindtest

  dj        DJ       @relation(fields: [djId], references: [id], onDelete: Cascade)
}

model Settings {
  id                    String  @id @default("default")
  lastSelectedDjId      String?
  weightLastPlayed      Float   @default(0.6)  // Poids pour la date du dernier passage
  weightTotalPlays      Float   @default(0.4)  // Poids pour le nombre de passages
}

model DJHistory {
  id          String   @id @default(cuid())
  djName      String   // Nom du DJ
  title       String   // Titre de la musique
  artist      String   // Nom de l'artiste
  youtubeUrl  String   // Lien YouTube
  playedAt    DateTime @default(now()) // Date de passage
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
